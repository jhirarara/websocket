<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WebSocket Demo</title>
  <script src="http://localhost:3000/socket.io/socket.io.js"></script> <!-- Ensure correct URL -->
</head>
<body>
  <h1>WebSocket Chat</h1>

  <div id="messages">
    <p id="dd"></p>
  </div>
  <input id="messageInput" type="text" placeholder="Type your message here...">
  <input id="room" type="room" placeholder="Type ryour message here...">
  <input id="user" type="room" placeholder="Type uyour message here...">
  <button onclick="sendMessage()">Send</button>
  <button onclick="join()">join</button>

  <script>
    // Connect to the WebSocket server
  const socket = io('http://localhost:3000'); 
  
  
  
  // Ensure you're connecting to the right server
  socket.on('k', (k) => {
      const messagesDiv = document.getElementById('messages');
      const messageElement = document.createElement('p');

    messageElement.textContent=k

      messagesDiv.appendChild(messageElement);
    });
    
    socket.on('message', (message) => {
      const messagesDiv = document.getElementById('messages');
      const messageElement = document.createElement('p');

    messageElement.textContent=message
      messagesDiv.appendChild(messageElement);
    });
const print=()=>{

  console.log('123');
}


function join() {   value=document.getElementById('room').value;  user=document.getElementById('user').value;  socket.emit('joinRoom',{
      'user': user,
      'value': value,
    });  



console.log(user);



value.value = '';  user.value = '';}







    function sendMessage() {
      console.log('123')

      value=document.getElementById('room').value;  user=document.getElementById('messageInput').value; 
      
      socket.emit('message',{
      'room': value,
      'message': user,
    }); 




//socket.emit('send',message,room);

/// Send the message to the server
value.value = '';
      user.value="";
      
      // Clear the input field
    }

    // Check connection status
    socket.on('connect', () => {
      
      document.getElementById('dd').innerHTML=socket.id
      console.log('Connected to server with ID:', socket.id);
    });

    socket.on('disconnect', () => {
      console.log('Disconnected from server');
    });

  </script>
</body>
</html>
